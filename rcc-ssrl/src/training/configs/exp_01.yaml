experiment:
  name: "moco_v3_test"
  outputs_root: "/tmp/rcc-ssrl-outputs"
  validate:
    paths: false
    steps_per_epoch: false
    batch_sizes: false

data:
  img_size: 224
  webdataset:
    train_dir: "/path/to/train"
    val_dir: "/path/to/val"
    class_to_id: {"class0": 0, "class1": 1}
    batch_size_ssl: 64
    batch_size_sl: 32
    num_workers: 4
    shuffle_shards: true
    shuffle_samples: true
    samples_per_epoch: 1000
    prefetch_factor: 4

model:
  type: "ssl"
  backbone: "resnet50"
  ssl:
    name: "moco_v3"
    temperature: 0.2
    use_multicrop: false
    wsi_debias:
      enabled: false
      mode: "filter"
      downweight: 0.25
    temp_teacher_schedule:
      start: 0.2
      end: 0.05
      warmup_frac: 0.1

train:
  ssl:
    epochs: 10
    steps_per_epoch: 100
    ema_momentum: 0.996
  optim:
    name: "adamw"
    lr: 0.001
    weight_decay: 0.0001
    betas: [0.9, 0.999]
  scheduler:
    name: "cosine"

logging:
  log_every_steps: 10
  metrics_csv_name: "ssl_timeseries.csv"
  smoothing_window: 50
